---
component_type: tool
tool_name: mobile-app-builder
version: "1.0"
status: production
claude_tools: [Write, Bash, Read]
category: mobile_generation
description: Bundles complete React Native mobile apps with optional on-device LLM models for deployment
---

# MobileAppBuilder Tool

## Purpose

The MobileAppBuilder tool creates complete, deployment-ready mobile app packages from generated React Native code. It handles dependency installation, configuration generation, LLM model bundling (if agentic), and creates deployment documentation.

## Core Responsibilities

1. **Dependency Management**: Generate package.json with all required dependencies
2. **Configuration Files**: Create tsconfig.json, babel.config.js, metro.config.js
3. **LLM Model Bundling**: Include on-device LLM models (if agentic)
4. **Manifest Generation**: Create app metadata and deployment manifest
5. **Documentation**: Generate README.md with setup and deployment instructions
6. **Validation**: Verify all required files are present and valid

## Bundling Process

### Step 1: Dependency Configuration

Generate complete package.json with appropriate dependencies based on app classification:

**Deterministic App (Code Only):**

```json
{
  "name": "habit-tracker",
  "version": "1.0.0",
  "description": "Habit tracking mobile app generated by LLMunix",
  "main": "index.js",
  "scripts": {
    "android": "react-native run-android",
    "ios": "react-native run-ios",
    "start": "react-native start",
    "test": "jest",
    "lint": "eslint .",
    "type-check": "tsc --noEmit"
  },
  "dependencies": {
    "react": "18.2.0",
    "react-native": "0.72.0",
    "@react-navigation/native": "^6.1.0",
    "@react-navigation/stack": "^6.3.0",
    "react-native-gesture-handler": "^2.12.0",
    "react-native-reanimated": "^3.3.0",
    "react-native-screens": "^3.22.0",
    "@react-native-async-storage/async-storage": "^1.19.0",
    "react-native-chart-kit": "^6.12.0"
  },
  "devDependencies": {
    "@babel/core": "^7.22.0",
    "@babel/preset-env": "^7.22.0",
    "@babel/runtime": "^7.22.0",
    "@react-native/eslint-config": "^0.72.0",
    "@react-native/metro-config": "^0.72.0",
    "@tsconfig/react-native": "^3.0.0",
    "@types/react": "^18.2.0",
    "@types/react-native": "^0.72.0",
    "typescript": "^5.1.0",
    "jest": "^29.5.0",
    "eslint": "^8.44.0"
  }
}
```

**Agentic App (With LLM):**

Add LLM-specific dependencies:

```json
{
  "dependencies": {
    // ... all deterministic dependencies ...
    "react-native-llama-cpp": "^1.0.0",
    "react-native-fs": "^2.20.0"
  }
}
```

### Step 2: TypeScript Configuration

Create tsconfig.json:

```json
{
  "extends": "@tsconfig/react-native/tsconfig.json",
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "lib": ["ES2020"],
    "jsx": "react-native",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "resolveJsonModule": true,
    "moduleResolution": "node",
    "allowSyntheticDefaultImports": true,
    "forceConsistentCasingInFileNames": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true
  },
  "include": [
    "src/**/*",
    "App.tsx",
    "index.js"
  ],
  "exclude": [
    "node_modules",
    "babel.config.js",
    "metro.config.js",
    "jest.config.js"
  ]
}
```

### Step 3: Babel Configuration

Create babel.config.js:

```javascript
module.exports = {
  presets: ['module:metro-react-native-babel-preset'],
  plugins: [
    'react-native-reanimated/plugin',
  ],
};
```

### Step 4: Metro Configuration

Create metro.config.js (with LLM asset support if agentic):

**Deterministic:**
```javascript
const {getDefaultConfig, mergeConfig} = require('@react-native/metro-config');

const config = {};

module.exports = mergeConfig(getDefaultConfig(__dirname), config);
```

**Agentic (with GGUF model support):**
```javascript
const {getDefaultConfig, mergeConfig} = require('@react-native/metro-config');

const config = {
  resolver: {
    assetExts: ['gguf', 'bin', 'png', 'jpg', 'jpeg', 'svg'],
  },
};

module.exports = mergeConfig(getDefaultConfig(__dirname), config);
```

### Step 5: LLM Model Bundling (If Agentic)

**Download Model:**

```bash
# Download Qwen3-0.6B-INT4 GGUF
wget https://huggingface.co/Qwen/Qwen2.5-0.5B-Instruct-GGUF/resolve/main/qwen2.5-0.5b-instruct-q4_k_m.gguf \
  -O models/qwen3-0.6b-int4.gguf
```

**Or Granite 4.0 H-1B:**

```bash
# Download Granite 4.0 H-1B INT4
wget https://huggingface.co/ibm-granite/granite-4.0-h-1b-instruct-gguf/resolve/main/granite-4.0-h-1b-instruct-q4_k_m.gguf \
  -O models/granite-4.0-h-1b-int4.gguf
```

**Model Metadata:**

Create models/model_metadata.json:

```json
{
  "model_name": "qwen3-0.6b-int4",
  "model_file": "qwen3-0.6b-int4.gguf",
  "size_mb": 600,
  "quantization": "INT4",
  "context_size": 2048,
  "vocab_size": 151936,
  "parameters": "600M",
  "recommended_threads": 4,
  "min_ram_mb": 1500,
  "expected_tokens_per_sec": 80,
  "source": "https://huggingface.co/Qwen/Qwen2.5-0.5B-Instruct-GGUF",
  "license": "Apache 2.0"
}
```

**LLM Service Code (Already generated by CodeGeneratorAgent):**

Verify llmService.ts exists and is properly configured.

### Step 6: Manifest Generation

Create manifest.json with complete app metadata:

```json
{
  "app_id": "habit-tracker-v1",
  "name": "Habit Tracker",
  "description": "Track daily habits and visualize progress over time",
  "version": "1.0.0",
  "generated_by": "llmunix-code-generator-agent",
  "generated_at": "2025-11-08T10:30:00Z",
  "project": "Project_habit_tracker",
  "classification": "deterministic",
  "size": {
    "code_and_assets_mb": 15,
    "llm_model_mb": 0,
    "total_mb": 15
  },
  "requires_llm": false,
  "llm_config": null,
  "platform": {
    "type": "react-native",
    "react_native_version": "0.72.0",
    "typescript": true
  },
  "min_requirements": {
    "ios": {
      "version": "13.0",
      "ram_mb": 2048,
      "storage_mb": 50
    },
    "android": {
      "version": "8.0",
      "api_level": 26,
      "ram_mb": 2048,
      "storage_mb": 50
    }
  },
  "features": [
    "Habit tracking",
    "Progress charts",
    "Streak calculation",
    "Reminders"
  ],
  "screens": [
    "DashboardScreen",
    "HabitListScreen",
    "AnalyticsScreen",
    "SettingsScreen"
  ],
  "deployment": {
    "ready_for_production": true,
    "tested": false,
    "app_store_ready": false
  }
}
```

**Agentic Manifest Example:**

```json
{
  "app_id": "personal-trainer-v1",
  "name": "AI Personal Trainer",
  "classification": "agentic",
  "size": {
    "code_and_assets_mb": 35,
    "llm_model_mb": 600,
    "total_mb": 635
  },
  "requires_llm": true,
  "llm_config": {
    "model_name": "qwen3-0.6b-int4",
    "model_file": "models/qwen3-0.6b-int4.gguf",
    "size_mb": 600,
    "framework": "llama.cpp",
    "expected_tokens_per_sec": 80,
    "min_ram_mb": 1500
  },
  "features": [
    "Adaptive workout generation",
    "Conversational AI trainer",
    "Form feedback",
    "Progress tracking"
  ],
  "min_requirements": {
    "ios": {
      "version": "14.0",
      "ram_mb": 3072,
      "storage_mb": 1024
    },
    "android": {
      "version": "10.0",
      "api_level": 29,
      "ram_mb": 3072,
      "storage_mb": 1024
    }
  }
}
```

### Step 7: README Generation

Create comprehensive README.md:

```markdown
# Habit Tracker Mobile App

Generated by **LLMunix CodeGeneratorAgent** from `Project_habit_tracker`

## Overview

A mobile app for tracking daily habits and visualizing progress over time.

**App Type**: Deterministic (Code-only, no LLM)
**Size**: 15MB
**Platforms**: iOS 13.0+, Android 8.0+

## Features

- ✅ Track daily habits with streak counting
- ✅ Visualize progress with interactive charts
- ✅ Set reminders for habit completion
- ✅ Dark mode support
- ✅ Offline-first architecture

## Prerequisites

- Node.js 18+
- React Native CLI
- Xcode (for iOS development)
- Android Studio (for Android development)

## Installation

1. **Install dependencies:**
   ```bash
   npm install
   ```

2. **iOS Setup:**
   ```bash
   cd ios && pod install && cd ..
   ```

3. **Android Setup:**
   Ensure Android SDK is configured properly

## Running the App

**iOS:**
```bash
npm run ios
```

**Android:**
```bash
npm run android
```

**Development Server:**
```bash
npm start
```

## Project Structure

```
mobile_app/
├── src/
│   ├── screens/         # Main app screens
│   │   ├── DashboardScreen.tsx
│   │   ├── HabitListScreen.tsx
│   │   ├── AnalyticsScreen.tsx
│   │   └── SettingsScreen.tsx
│   ├── components/      # Reusable UI components
│   │   ├── HabitCard.tsx
│   │   ├── ProgressChart.tsx
│   │   └── Button.tsx
│   ├── services/        # Business logic
│   │   ├── habitService.ts
│   │   └── storageService.ts
│   ├── navigation/      # Navigation setup
│   │   └── AppNavigator.tsx
│   └── types/           # TypeScript types
│       └── index.ts
├── App.tsx              # Entry point
├── package.json         # Dependencies
└── manifest.json        # App metadata
```

## Building for Production

**iOS (via Xcode):**
1. Open `ios/HabitTracker.xcworkspace` in Xcode
2. Select Product > Archive
3. Follow App Store submission workflow

**Android (via Android Studio):**
1. Open `android/` directory in Android Studio
2. Build > Generate Signed Bundle / APK
3. Follow Google Play submission workflow

## Testing

```bash
npm test
```

## Type Checking

```bash
npm run type-check
```

## Linting

```bash
npm run lint
```

## Troubleshooting

**Build Errors:**
- Clear cache: `npx react-native start --reset-cache`
- Clean build: `cd ios && xcodebuild clean && cd ..`

**Metro Bundler Issues:**
- Kill port 8081: `npx react-native start --port 8082`

## Generated by LLMunix

This app was generated automatically from the LLMunix project:
- **Project**: Project_habit_tracker
- **Generated**: 2025-11-08T10:30:00Z
- **Version**: 1.0.0

For more information about LLMunix: https://github.com/llmunix

## License

This generated app is available under the same license as the source LLMunix project.
```

**Agentic App README (Additional Sections):**

```markdown
## AI Model Information

This app includes an on-device AI model for adaptive features.

**Model**: Qwen3-0.6B-INT4
**Size**: 600MB
**Purpose**: Generate personalized workout plans and answer fitness questions

### Model Setup

The model is included in `models/qwen3-0.6b-int4.gguf`. On first launch, the app will initialize the model (may take 10-15 seconds).

### AI Features

- **Adaptive Workout Generation**: Creates personalized workout routines based on your progress
- **Conversational AI**: Ask fitness-related questions and receive guidance
- **Form Feedback**: Describes your form and suggests improvements

### Performance

- **Response Time**: ~1-2 seconds for typical queries
- **Offline**: Fully functional without internet connection
- **Privacy**: All AI processing happens on-device, no data sent to cloud

### Model Requirements

- **Minimum RAM**: 1.5GB available
- **Storage**: 700MB (including app)
- **Processing**: Works best on devices with NPU/Neural Engine
```

### Step 8: Validation

Verify the complete app structure:

```bash
# Check all required files exist
ls -R mobile_app/

# Validate TypeScript
tsc --noEmit

# Check package.json syntax
npm install --dry-run

# Verify model file (if agentic)
ls -lh mobile_app/models/*.gguf
```

**Expected Output:**

```
mobile_app/
├── manifest.json ✅
├── package.json ✅
├── tsconfig.json ✅
├── babel.config.js ✅
├── metro.config.js ✅
├── App.tsx ✅
├── index.js ✅
├── src/
│   ├── screens/ ✅
│   ├── components/ ✅
│   ├── services/ ✅
│   ├── navigation/ ✅
│   └── types/ ✅
├── assets/ ✅
├── models/ (if agentic) ✅
└── README.md ✅

All checks passed! ✅
```

### Step 9: Size Optimization

**Code Minification:**
- Enable Hermes engine for smaller bundle size
- Remove unused dependencies
- Optimize images and assets

**Hermes Configuration (android/app/build.gradle):**

```gradle
project.ext.react = [
    enableHermes: true,  // Enable Hermes for smaller size and faster startup
]
```

**iOS Optimization:**

Enable bitcode and dead code stripping in Xcode build settings.

**Asset Optimization:**

```bash
# Optimize PNG images
optipng assets/**/*.png

# Compress JPEG images
jpegoptim assets/**/*.jpg
```

### Step 10: Final Package

Create deployment summary:

```yaml
deployment_package:
  location: projects/Project_habit_tracker/mobile_app/
  total_size_mb: 15
  files_count: 47
  ready_for_deployment: true
  platforms:
    - iOS 13.0+
    - Android 8.0+
  next_steps:
    - "Run 'npm install' to install dependencies"
    - "Test on physical device"
    - "Submit to App Store / Google Play"
```

## Tool Implementation

### Claude Code Tool Mapping

**Write Tool**: Create all app files

```
TOOL_CALL: Write(file_path: "projects/{ProjectName}/mobile_app/package.json", content: {package_json})
TOOL_CALL: Write(file_path: "projects/{ProjectName}/mobile_app/manifest.json", content: {manifest})
TOOL_CALL: Write(file_path: "projects/{ProjectName}/mobile_app/README.md", content: {readme})
...
```

**Bash Tool**: Validate and optimize

```
TOOL_CALL: Bash(command: "tsc --noEmit --project projects/{ProjectName}/mobile_app/", description: "Validate TypeScript")
TOOL_CALL: Bash(command: "npm install --dry-run --prefix projects/{ProjectName}/mobile_app/", description: "Validate package.json")
```

**Read Tool**: Verify generated files

```
TOOL_CALL: Read(file_path: "projects/{ProjectName}/mobile_app/manifest.json")
```

## Error Handling

### Missing Generated Code

```
ERROR: No source code files found in mobile_app/src/
ACTION: Notify CodeGeneratorAgent that code generation failed
```

### LLM Model Download Failure

```
ERROR: Failed to download qwen3-0.6b-int4.gguf
ACTION: Provide manual download instructions in README.md
FALLBACK: Generate deterministic version, note in manifest
```

### Invalid Dependencies

```
ERROR: Package.json has invalid dependency versions
ACTION: Fix versions to stable releases, validate with npm
```

### Size Exceeds Limits

```
WARNING: Total app size (1.8GB) exceeds recommended limit (1.5GB)
ACTION: Suggest using smaller model or on-demand download strategy
```

## Advanced Features

### Progressive Model Download

For agentic apps, support on-demand model download:

**Modified llmService.ts:**

```typescript
class LLMService {
  async checkModelAvailable(): Promise<boolean> {
    const modelPath = 'models/qwen3-0.6b-int4.gguf';
    return await RNFS.exists(modelPath);
  }

  async downloadModel(): Promise<void> {
    const modelUrl = 'https://cdn.llmunix.com/models/qwen3-0.6b-int4.gguf';
    const modelPath = 'models/qwen3-0.6b-int4.gguf';

    await RNFS.downloadFile({
      fromUrl: modelUrl,
      toFile: modelPath,
      progress: (res) => {
        const progress = (res.bytesWritten / res.contentLength) * 100;
        console.log(`Model download: ${progress}%`);
      }
    }).promise;
  }

  async initialize() {
    if (!(await this.checkModelAvailable())) {
      console.log('Model not found, downloading...');
      await this.downloadModel();
    }

    this.model = await LlamaCpp.loadModel({
      modelPath: 'models/qwen3-0.6b-int4.gguf',
      contextSize: 2048,
    });
  }
}
```

**Benefits:**
- Smaller initial download (35MB vs 635MB)
- User chooses when to enable AI features
- Better for limited storage devices

### Multi-Model Support

Support both Qwen and Granite with runtime selection:

```typescript
const models = {
  'qwen3-0.6b': 'models/qwen3-0.6b-int4.gguf',
  'granite-4.0-h-1b': 'models/granite-4.0-h-1b-int4.gguf'
};

async function loadModel(modelName: string) {
  const modelPath = models[modelName];
  return await LlamaCpp.loadModel({ modelPath });
}
```

### Streaming Deployment

Generate deployment script for progressive app delivery:

**deploy.sh:**

```bash
#!/bin/bash

# Phase 1: Deploy core app (fast)
echo "Deploying core app (15MB)..."
rsync -avz mobile_app/ device:/apps/habit-tracker/ \
  --exclude models/ --exclude node_modules/

# Phase 2: Install dependencies
echo "Installing dependencies..."
ssh device "cd /apps/habit-tracker && npm install"

# Phase 3: Deploy LLM model (if needed)
if [ -f "mobile_app/models/qwen3-0.6b-int4.gguf" ]; then
  echo "Deploying LLM model (600MB, this may take a while)..."
  rsync -avz mobile_app/models/ device:/apps/habit-tracker/models/
fi

echo "Deployment complete!"
```

## Integration Points

### With CodeGeneratorAgent

```
CodeGeneratorAgent invokes: "Bundle complete app for Project_habit_tracker"
MobileAppBuilder:
  1. Reads generated code from mobile_app/src/
  2. Creates configuration files
  3. Generates package.json with dependencies
  4. Includes LLM model (if agentic)
  5. Creates manifest.json and README.md
  6. Validates complete package
  7. Returns deployment summary
```

### With MobileAppAnalyzer

```
MobileAppAnalyzer classified: "agentic, qwen3-0.6b"
MobileAppBuilder:
  - Adds react-native-llama-cpp dependency
  - Downloads qwen3-0.6b-int4.gguf model
  - Configures Metro for GGUF assets
  - Updates manifest with LLM metadata
  - Adjusts min requirements (RAM, storage)
```

## Output Structure

Complete bundled app in projects/{ProjectName}/mobile_app/:

```
mobile_app/
├── manifest.json          # App metadata and configuration
├── package.json           # NPM dependencies
├── tsconfig.json          # TypeScript configuration
├── babel.config.js        # Babel transpiler config
├── metro.config.js        # Metro bundler config
├── App.tsx                # Entry point
├── index.js               # Root index
├── src/                   # Source code
│   ├── screens/
│   ├── components/
│   ├── services/
│   ├── navigation/
│   └── types/
├── assets/                # Images, fonts, etc.
├── models/                # LLM models (if agentic)
│   ├── qwen3-0.6b-int4.gguf
│   └── model_metadata.json
├── android/               # Android native config
├── ios/                   # iOS native config
└── README.md              # Setup and deployment guide
```

## Quality Metrics

**Completeness Checks:**
- ✅ All TypeScript files compile without errors
- ✅ All dependencies resolve correctly
- ✅ Navigation structure is valid
- ✅ LLM model present and valid (if agentic)
- ✅ README includes all setup steps

**Size Optimization:**
- ✅ Total size within mobile constraints (<1.5GB)
- ✅ No duplicate dependencies
- ✅ Assets optimized (compressed images)
- ✅ Hermes enabled for smaller bundle

**Documentation Quality:**
- ✅ README covers all setup steps
- ✅ Troubleshooting section included
- ✅ AI model usage explained (if agentic)
- ✅ Next steps clearly outlined

## Related Components

- **CodeGeneratorAgent** (`system/agents/CodeGeneratorAgent.md`): Generates app code before bundling
- **MobileAppAnalyzer** (`system/tools/MobileAppAnalyzer.md`): Determines bundling strategy
- **SystemAgent** (`system/agents/SystemAgent.md`): Orchestrates overall workflow

## Core Value

**MobileAppBuilder ensures production-ready mobile apps:**

- ✅ Complete configuration (no manual setup needed)
- ✅ Optimized dependencies (minimal size)
- ✅ Comprehensive documentation (easy deployment)
- ✅ Validated output (ready to test)
- ✅ Platform support (iOS + Android)

This tool transforms generated code into deployable mobile applications, completing LLMunix's journey from user prompt to edge deployment.
